# Traffic Prediction Application - Integrated Multi-Model System

## ğŸš€ QUICK START (Two Terminals)

conda activate traffic-prediction

### Terminal 1 - Enhanced Flask Backend (Multi-Model Support):
```bash
cd UCS_Model-main
python traffic_prediction_api_enhanced.py
```
**OR** use the original single-model API:
```bash
cd UCS_Model-main
python traffic_prediction_api.py
```

### Terminal 2 - Next.js Frontend:
```bash
npm run dev
```

## ğŸŒ Access URLs:
- **Main App**: http://localhost:3000
- **Flask API**: http://localhost:5001
- **API Health**: http://localhost:5001/api/health
- **Model Info**: http://localhost:5001/api/model_info

## ğŸ“Š AVAILABLE MODELS:
1. **LSTM Model** - Sequential time series prediction
2. **CNN-LSTM Model** - Spatial-temporal feature extraction
3. **Best Model** - Highest performing model
4. **Ensemble** - Weighted combination of all models (recommended)

## ğŸ§ª TEST API:
```bash
# Test single prediction with ensemble model
curl -X POST http://localhost:5001/api/predict \
  -H "Content-Type: application/json" \
  -d '{
    "latitude": 16.5062,
    "longitude": 80.6480,
    "timestamp": "2024-11-05T14:30:00",
    "model": "ensemble"
  }'

# Test with specific model (lstm, cnn_lstm, best, or ensemble)
curl -X POST http://localhost:5001/api/predict \
  -H "Content-Type: application/json" \
  -d '{
    "latitude": 16.5062,
    "longitude": 80.6480,
    "timestamp": "2024-11-05T14:30:00",
    "model": "lstm"
  }'

# Check available models
curl http://localhost:5001/api/model_info
```

## ğŸ”§ MODEL TRAINING:

### Train LSTM Model:
```bash
cd UCS_Model-main
python lstm_model.py
```

### Train CNN-LSTM Model:
```bash
cd UCS_Model-main
python cnn_lstm_model.py
```

### Compare All Models:
```bash
cd UCS_Model-main
python combine_models.py
```

## ğŸ“ PROJECT STRUCTURE:
```
traffic-cogestion-1/
â”œâ”€â”€ UCS_Model-main/           # Backend models & API
â”‚   â”œâ”€â”€ models/               # Trained model files
â”‚   â”‚   â”œâ”€â”€ lstm_model.h5
â”‚   â”‚   â”œâ”€â”€ cnn_lstm_model.h5
â”‚   â”‚   â””â”€â”€ best_model.h5
â”‚   â”œâ”€â”€ traffic_prediction_api_enhanced.py  # Multi-model API
â”‚   â”œâ”€â”€ lstm_model.py         # LSTM training
â”‚   â”œâ”€â”€ cnn_lstm_model.py     # CNN-LSTM training
â”‚   â””â”€â”€ combine_models.py     # Model comparison
â”œâ”€â”€ app/                      # Next.js frontend
â”œâ”€â”€ components/               # React components
â””â”€â”€ lib/                      # Utilities

traffic/                      # Original training folder (archived)
â”œâ”€â”€ lstm_model.py
â”œâ”€â”€ cnn_lstm_model.py
â””â”€â”€ README.md
```

## ğŸ› ï¸ TROUBLESHOOTING:

### Port Already in Use:
```bash
# Kill process on port 5001
lsof -ti:5001 | xargs kill -9

# Kill process on port 3000
lsof -ti:3000 | xargs kill -9
```

### Model Not Found:
- Ensure you're in the `UCS_Model-main` directory
- Check that model files exist in `models/` folder
- Run training scripts if models are missing

### Dependencies Missing:
```bash
# Backend dependencies
pip install tensorflow numpy pandas scikit-learn matplotlib flask

# Frontend dependencies
npm install
```

## ğŸ“š DOCUMENTATION:
- **Integrated System**: UCS_Model-main/README_INTEGRATED.md
- **Original Models**: traffic/README.md
- **Deployment Guide**: UCS_Model-main/deployment_guide.md

## ğŸ¯ FEATURES:
âœ… Multiple deep learning models (LSTM, CNN-LSTM)
âœ… Ensemble predictions for better accuracy
âœ… Real-time traffic prediction API
âœ… Route-based traffic analysis
âœ… Interactive web interface
âœ… Model performance comparison tools
âœ… Publication-quality visualizations

---
**Version**: 2.0 (Integrated Multi-Model System)
**Last Updated**: November 2024
